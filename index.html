<html>

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Free Web tutorials">
    <meta name="keywords" content="HTML, CSS, JavaScript">
    <meta name="author" content="John Doe">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,200,300,600,700' rel='stylesheet'
        type='text/css'>
    <link href='style.css' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<body>
    <button id="back_status">Back Status</button>
    <button id="next_status">Next Status</button>

    <ul class="timeline" id="timeline">
        <li class="li" id="status_1">
            <div class="timestamp">
                <span class="author">Abhi Sharma</span>
                <span class="date">11/15/2014<span>
            </div>
            <div class="status">
                <h4> Sent </h4>
            </div>
        </li>
        <li class="li" id="status_2">
            <div class="timestamp">
                <span class="author">PAM Admin</span>
                <span class="date">11/15/2014<span>
            </div>
            <div class="status">
                <h4>Waiting to approval</h4>
            </div>
        </li>
        <li class="li" id="status_3">
            <div class="timestamp">
                <span class="author">Aaron Rodgers</span>
                <span class="date">11/15/2014<span>
            </div>
            <div class="status">
                <h4>Approved</h4>
            </div>
        </li>
        <li class="li" id="status_4">
            <div class="timestamp">
                <span class="author">PAM Admin</span>
                <span class="date">TBD<span>
            </div>
            <div class="status">
                <h4>Completed</h4>
            </div>
        </li>
    </ul>
</body>
<script>
   
    $.ajax({url: "consulta.php", dataType:'json', success: function(result){
        toggleComplete(result);
  }});
  
    function toggleComplete(result) {
        $(result).each(function (index, element) {
            let statusElementId = "#status_"+element.id;
            $(statusElementId).addClass('complete');
        });

    }
    function removeComplete(){
        let completes = document.querySelectorAll(".complete");
        let lastComplete = completes[completes.length - 1];
        lastComplete.classList.toggle('complete');
      }

    function addComplete(){
        let completes = document.querySelectorAll(".complete");
        let statusId= parseInt(completes.length)+1;
        let status = "#status_"+statusId;
        $(status).addClass('complete');
    } 
    $("#back_status").click(removeComplete);
    $("#next_status").click(addComplete);
</script>

</html>